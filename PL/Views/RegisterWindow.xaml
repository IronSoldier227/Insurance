<!-- PL/Views/RegisterWindow.xaml -->
<Window x:Class="PL.RegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:PL.Converters" 
        Title="Регистрация" Height="500" Width="450"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Style="{StaticResource CustomWindowStyle}">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <!-- Прокручиваемое содержимое -->
            <RowDefinition Height="Auto"/>
            <!-- Сообщение об ошибке -->
            <RowDefinition Height="Auto"/>
            <!-- Кнопка регистрации -->
            <RowDefinition Height="Auto"/>
            <!-- Пустое пространство -->
            <RowDefinition Height="Auto"/>
            <!-- Ссылка на вход -->
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Orientation="Vertical">

                <Label Content="Тип пользователя" FontWeight="Bold" Margin="0,0,0,5"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <RadioButton Content="Клиент" 
                                 IsChecked="{Binding IsClientType}" 
                                 Style="{StaticResource CustomRadioButtonStyle}"
                                 Margin="0,0,20,0"/>
                    <RadioButton Content="Менеджер" 
                                 IsChecked="{Binding IsManagerType}" 
                                 Style="{StaticResource CustomRadioButtonStyle}"/>
                </StackPanel>

                <Label Content="Логин" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Login, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>

                <Label Content="Пароль" Margin="0,0,0,5"/>
                <PasswordBox x:Name="PasswordBox" 
                             Style="{StaticResource CustomPasswordBoxStyle}"/>

                <Label Content="Имя" Margin="0,0,0,5"/>
                <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>
                <Label Content="Фамилия" Margin="0,0,0,5"/>
                <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>
                <Label Content="Отчество" Margin="0,0,0,5"/>
                <TextBox Text="{Binding MiddleName, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>
                <Label Content="Номер телефона" Margin="0,0,0,5"/>
                <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>

                <Label Content="Пасспорт" 
                       Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                       Margin="0,10,0,5"/>
                <TextBox Text="{Binding Passport, UpdateSourceTrigger=PropertyChanged}" 
                         Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>

                <Label Content="Номер В/У" 
                       Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                       Margin="0,10,0,5"/>
                <TextBox Text="{Binding DriverLicense, UpdateSourceTrigger=PropertyChanged}" 
                         Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>

                <Label Content="Стаж вождения" 
                       Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                       Margin="0,10,0,5"/>
                <TextBox Text="{Binding DrivingExperience, UpdateSourceTrigger=PropertyChanged, StringFormat=N0}" 
                         Visibility="{Binding IsClientType, Converter={StaticResource BoolToVisibilityConverter}}" 
                         Style="{StaticResource CustomTextBoxStyle}"/>

            </StackPanel>
        </ScrollViewer>

        <!-- Сообщение об ошибке -->
        <TextBlock Grid.Row="1" 
                   Text="{Binding ErrorMessage}" 
                   Foreground="Red" 
                   HorizontalAlignment="Center" 
                   Margin="0,5,0,5" 
                   TextWrapping="Wrap" 
                   Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

        <!-- Кнопка регистрации -->
        <Button Grid.Row="2"
                Content="Зарегистрироваться" 
                HorizontalAlignment="Center" 
                Width="150" 
                Command="{Binding RegisterCommand}" 
                CommandParameter="{x:Reference PasswordBox}" 
                Style="{StaticResource CustomButtonStyle}"
                Margin="0,15,0,5"/>

        <!-- Пустое пространство -->
        <TextBlock Grid.Row="3" 
                   Text="" 
                   Margin="0,0,0,10"/>

        <!-- Ссылка на вход -->
        <TextBlock Grid.Row="4" 
                   Text="Уже есть аккаунт? Войти" 
                   Foreground="{StaticResource PrimaryBrush}" 
                   TextDecorations="Underline" 
                   HorizontalAlignment="Center" 
                   Margin="0,0,0,20" 
                   Cursor="Hand">
            <TextBlock.InputBindings>
                <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToLoginCommand}"/>
                <!-- Предполагаем, что команда есть в ViewModel -->
            </TextBlock.InputBindings>
        </TextBlock>
    </Grid>
</Window>